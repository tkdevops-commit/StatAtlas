<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>World Map Color Highlighter</title>
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://unpkg.com/topojson-client@3"></script>
  <style>
    body {
      margin: 0;
      background: #fff;
      color: #111;
      font-family: sans-serif;
    }

    nav {
      background-color: #222;
      color: white;
      display: flex;
      justify-content: space-between;
      padding: 10px 20px;
      align-items: center;
      font-size: 18px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.5);
    }

    .logo {
      font-weight: bold;
    }

    .tools {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    button {
      background-color: #444;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 4px;
      cursor: pointer;
    }

    button:hover {
      background-color: #555;
    }

    #map-container {
      width: 100vw;
      height: calc(100vh - 60px);
      overflow: hidden;
    }

    svg {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo">üåç World Map</div>
    <div class="tools">
      <input type="color" id="colorPicker" value="#ff0000" />
      <button id="toggle-states">Toggle State Borders</button>
    </div>
  </nav>

  <div id="map-container"></div>

  <script>
    const width = 1000;
    const height = 600;

    const svg = d3.select("#map-container")
      .append("svg")
      .attr("width", width)
      .attr("height", height);

    const mapGroup = svg.append("g");

    const projection = d3.geoNaturalEarth1()
      .scale(160)
      .translate([width / 2, height / 2]);

    const path = d3.geoPath().projection(projection);

    const colorPicker = document.getElementById("colorPicker");
    let selectedColor = colorPicker.value;

    colorPicker.addEventListener("input", () => {
      selectedColor = colorPicker.value;
    });

    d3.json("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json").then(worldData => {
      const countries = topojson.feature(worldData, worldData.objects.countries).features;

      mapGroup.selectAll("path")
        .data(countries)
        .enter()
        .append("path")
        .attr("d", path)
        .attr("fill", "#2c3e50")
        .attr("stroke", "#ffffff")
        .attr("stroke-width", 0.5)
        .on("click", function () {
          d3.select(this).attr("fill", selectedColor);
        });
    }).catch(err => {
      console.error("Map load error:", err);
    });

    // Zoom behavior
    const zoom = d3.zoom()
      .scaleExtent([1, 8])
      .on("zoom", (event) => {
        mapGroup.attr("transform", event.transform);
      });

    svg.call(zoom);
  </script>
</body>
</html>
